<button mat-button class="shadow-1 mb-2" (click)="goBack()">
<mat-icon>arrow_back_ios_new</mat-icon> Dashboard
</button>
<mat-card>
    <mat-card-header class="mb-4">
        <mat-card-header>Organization Details</mat-card-header>
    </mat-card-header>
    <mat-card-content *ngIf="!loading.organization && !loading.address">
        <form [formGroup]="formGroup" class="flex justify-content-between">
            <div class="flex flex-column md:flex-row overflow-y-auto h-full">
                <div class="mr-1">
                    <mat-form-field class="w-full">
                        <mat-label>Name</mat-label>
                        <input matInput formControlName="name" required [readonly]="isEditDisabled"/>
                    </mat-form-field>
                    <mat-form-field class="w-full">
                        <mat-label>Email</mat-label>
                        <input matInput formControlName="email" [readonly]="isEditDisabled" />
                    </mat-form-field>
                    <mat-form-field class="w-full">
                        <mat-label>Phone</mat-label>
                        <input matInput formControlName="phone" [readonly]="isEditDisabled" />
                    </mat-form-field>
                    <mat-form-field class="w-full">
                        <mat-label>Website</mat-label>
                        <input matInput formControlName="website" [readonly]="isEditDisabled" />
                    </mat-form-field>
                    <mat-form-field *ngIf="isEditDisabled" class="w-full">
                        <mat-label>Region</mat-label>
                        <input matInput value="{{fireService.regions.get(organization.region)}}" readonly required>
                    </mat-form-field>
                </div>
                <div formGroupName="address" class="ml-1">
                    <mat-form-field class="w-full">
                        <mat-label>Street</mat-label>
                        <input matInput formControlName="street" [readonly]="isEditDisabled" />
                    </mat-form-field>
                    <mat-form-field class="w-full">
                        <mat-label>City</mat-label>
                        <input matInput formControlName="city" [readonly]="isEditDisabled" />
                    </mat-form-field>
                    <mat-form-field class="w-full">
                        <mat-label>State</mat-label>
                        <input matInput formControlName="state" [readonly]="isEditDisabled" />
                    </mat-form-field>
                    <mat-form-field class="w-full">
                        <mat-label>Zip</mat-label>
                        <input matInput formControlName="zip" [readonly]="isEditDisabled" />
                    </mat-form-field>
                    <mat-form-field *ngIf="isEditDisabled" class="w-full">
                        <mat-label>Country</mat-label>
                        <input matInput value="{{fireService.countries.get(organization.country)}}" readonly required />
                    </mat-form-field>
                </div>
            </div>
        </form>
        <form *ngIf="!loading.contacts" [formGroup]="contacts">
            <p>Contacts</p>
            <div class="overflow-y-auto h-14rem">
                <mat-accordion>
                    @for (id of contactIds; track id; let idx = $index) {
                        <mat-expansion-panel formGroupName="{{id}}" class="w-full">
                            <mat-expansion-panel-header>
                                <mat-panel-title>Contact {{idx + 1}}</mat-panel-title>
                            </mat-expansion-panel-header>
                            <mat-form-field  class="w-4 mr-2">
                                <mat-label>Name</mat-label>
                                <input matInput formControlName="name">
                            </mat-form-field>
                            <mat-form-field  class="w-4 mr-2">
                                <mat-label>Role</mat-label>
                                <input matInput formControlName="role">
                            </mat-form-field>
                            <mat-form-field  class="w-4 mr-2">
                                <mat-label>Email</mat-label>
                                <input matInput formControlName="email">
                            </mat-form-field>
                            <mat-form-field  class="w-4 mr-2">
                                <mat-label>Phone</mat-label>
                                <input matInput formControlName="phone">
                            </mat-form-field>
                        </mat-expansion-panel>
                    } @empty {
                        <p>No contact.</p>
                    }
                </mat-accordion>
            </div>
        </form>
    </mat-card-content>
    <mat-card-actions class="flex justify-content-center">
        <button mat-flat-button>Edit</button>
        <button mat-flat-button>Reviews</button>
    </mat-card-actions>
    <mat-card-footer>
        <mat-progress-bar *ngIf="loading.organization" mode="indeterminate"></mat-progress-bar>
    </mat-card-footer>
</mat-card>